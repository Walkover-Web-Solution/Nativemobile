"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var invoice_1 = require("./apiurls/invoice");
var httpWrapper_service_1 = require("./httpWrapper.service");
var router_1 = require("@angular/router");
var catchmanger_1 = require("./catchManager/catchmanger");
var general_service_1 = require("./general.service");
var service_config_1 = require("./service.config");
// import { IsDivVisible } from '../invoice/templates/edit-template/filters-container/content-filters/content.filters.component';
var InvoiceTemplatesService = (function () {
    function InvoiceTemplatesService(errorHandler, _http, _router, _generalService, config) {
        this.errorHandler = errorHandler;
        this._http = _http;
        this._router = _router;
        this._generalService = _generalService;
        this.config = config;
    }
    InvoiceTemplatesService.prototype.getTemplates = function () {
        var _this = this;
        this.user = this._generalService.user;
        this.companyUniqueName = this._generalService.companyUniqueName;
        return this._http.get(this.config.apiUrl + invoice_1.INVOICE_API.GET_USER_TEMPLATES).map(function (res) {
            var data = res.json();
            return data;
        }).catch(function (e) { return _this.errorHandler.HandleCatch(e, ''); });
    };
    InvoiceTemplatesService.prototype.getAllCreatedTemplates = function () {
        var _this = this;
        this.user = this._generalService.user;
        this.companyUniqueName = this._generalService.companyUniqueName;
        return this._http.get(this.config.apiUrl + invoice_1.INVOICE_API.GET_CREATED_TEMPLATES.replace(':companyUniqueName', encodeURIComponent(this.companyUniqueName))).map(function (res) {
            var data = res.json();
            return data;
        }).catch(function (e) { return _this.errorHandler.HandleCatch(e, ''); });
    };
    InvoiceTemplatesService.prototype.getCustomTemplate = function (templateUniqueName) {
        var _this = this;
        this.user = this._generalService.user;
        this.companyUniqueName = this._generalService.companyUniqueName;
        return this._http.get(this.config.apiUrl + invoice_1.INVOICE_API.GET_CUSTOM_TEMPLATE.replace(':companyUniqueName', encodeURIComponent(this.companyUniqueName)).replace(':templateUniqueName', templateUniqueName)).map(function (res) {
            var data = res.json();
            return data;
        }).catch(function (e) {
            var object = _this.errorHandler.HandleCatch(e);
            return object.map(function (p) { return p.body; });
        });
    };
    InvoiceTemplatesService.prototype.setTemplateAsDefault = function (templateUniqueName) {
        var _this = this;
        this.user = this._generalService.user;
        this.companyUniqueName = this._generalService.companyUniqueName;
        return this._http.patch(this.config.apiUrl + invoice_1.INVOICE_API.SET_AS_DEFAULT.replace(':companyUniqueName', encodeURIComponent(this.companyUniqueName)).replace(':templateUniqueName', templateUniqueName), {}).map(function (res) {
            var data = res.json();
            data.queryString = { templateUniqueName: templateUniqueName };
            return data;
        }).catch(function (e) {
            var object = _this.errorHandler.HandleCatch(e);
            return object.map(function (p) { return p.body; });
        });
    };
    InvoiceTemplatesService.prototype.deleteTemplate = function (templateUniqueName) {
        var _this = this;
        this.user = this._generalService.user;
        this.companyUniqueName = this._generalService.companyUniqueName;
        return this._http.delete(this.config.apiUrl + invoice_1.INVOICE_API.DELETE_TEMPLATE.replace(':companyUniqueName', encodeURIComponent(this.companyUniqueName)).replace(':templateUniqueName', templateUniqueName)).map(function (res) {
            var data = res.json();
            data.queryString = { templateUniqueName: templateUniqueName };
            return data;
        }).catch(function (e) {
            var object = _this.errorHandler.HandleCatch(e);
            return object.map(function (p) { return p.body; });
        });
    };
    // public saveTemplates(model: any): Observable<Template> {
    //   alert('ok');
    //   this.store.take(1).subscribe(s => {
    //     if (s.session.user) {
    //       this.user = s.session.user.user;
    //     }
    //     this.companyUniqueName = s.session.companyUniqueName;
    //   });
    //   return this._http.post(this.config.apiUrl + INVOICE_API.CREATE_NEW_TEMPLATE.replace(':companyUniqueName', encodeURIComponent(this.companyUniqueName)), model).map((res) => {
    //     let data: Template = res.json();
    //     return data;
    //   }).catch((e) => {
    //     let object = this.errorHandler.HandleCatch<Template, string>(e);
    //     return object.map(p => p.body);
    //   });
    // }
    InvoiceTemplatesService.prototype.saveTemplates = function (model) {
        var _this = this;
        this.user = this._generalService.user;
        this.companyUniqueName = this._generalService.companyUniqueName;
        return this._http.post(this.config.apiUrl + invoice_1.INVOICE_API.CREATE_NEW_TEMPLATE.replace(':companyUniqueName', encodeURIComponent(this.companyUniqueName)), model).map(function (res) {
            var data = res.json();
            data.request = model;
            data.queryString = {};
            return data;
        }).catch(function (e) { return _this.errorHandler.HandleCatch(e, model); });
    };
    InvoiceTemplatesService.prototype.updateTemplate = function (templateUniqueName, model) {
        var _this = this;
        this.user = this._generalService.user;
        this.companyUniqueName = this._generalService.companyUniqueName;
        return this._http.put(this.config.apiUrl + invoice_1.INVOICE_API.UPDATE_TEMPLATE.replace(':companyUniqueName', encodeURIComponent(this.companyUniqueName)).replace(':templateUniqueName', encodeURIComponent(templateUniqueName)), model).map(function (res) {
            var data = res.json();
            data.request = model;
            data.queryString = {};
            return data;
        }).catch(function (e) { return _this.errorHandler.HandleCatch(e, model); });
    };
    return InvoiceTemplatesService;
}());
InvoiceTemplatesService = __decorate([
    core_1.Injectable(),
    __param(4, core_1.Optional()), __param(4, core_1.Inject(service_config_1.ServiceConfig)),
    __metadata("design:paramtypes", [catchmanger_1.ErrorHandler, httpWrapper_service_1.HttpWrapperService, router_1.Router,
        general_service_1.GeneralService, Object])
], InvoiceTemplatesService);
exports.InvoiceTemplatesService = InvoiceTemplatesService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW52b2ljZS50ZW1wbGF0ZXMuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImludm9pY2UudGVtcGxhdGVzLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFFQSxzQ0FBNkQ7QUFDN0QsNkNBQWdEO0FBQ2hELDZEQUEyRDtBQUMzRCwwQ0FBeUM7QUFHekMsMERBQTBEO0FBQzFELHFEQUFtRDtBQUNuRCxtREFBcUU7QUFFckUsaUlBQWlJO0FBR2pJLElBQWEsdUJBQXVCO0lBSWxDLGlDQUFvQixZQUEwQixFQUFTLEtBQXlCLEVBQVMsT0FBZSxFQUNwRixlQUErQixFQUE2QyxNQUEwQjtRQUR0RyxpQkFBWSxHQUFaLFlBQVksQ0FBYztRQUFTLFVBQUssR0FBTCxLQUFLLENBQW9CO1FBQVMsWUFBTyxHQUFQLE9BQU8sQ0FBUTtRQUNwRixvQkFBZSxHQUFmLGVBQWUsQ0FBZ0I7UUFBNkMsV0FBTSxHQUFOLE1BQU0sQ0FBb0I7SUFDMUgsQ0FBQztJQUVNLDhDQUFZLEdBQW5CO1FBQUEsaUJBT0M7UUFOQyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDO1FBQ3RDLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLGlCQUFpQixDQUFDO1FBQ2hFLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxxQkFBVyxDQUFDLGtCQUFrQixDQUFDLENBQUMsR0FBRyxDQUFDLFVBQUMsR0FBRztZQUNqRixJQUFJLElBQUksR0FBbUQsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ3RFLE1BQU0sQ0FBQyxJQUFJLENBQUM7UUFDZCxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsVUFBQyxDQUFDLElBQUssT0FBQSxLQUFJLENBQUMsWUFBWSxDQUFDLFdBQVcsQ0FBbUMsQ0FBQyxFQUFFLEVBQUUs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Q29udGVudCI6WyJpbXBvcnQgeyBDdXN0b21UZW1wbGF0ZVJlc3BvbnNlLCBHZXRJbnZvaWNlVGVtcGxhdGVEZXRhaWxzUmVzcG9uc2UgfSBmcm9tICcuLi9tb2RlbHMvYXBpLW1vZGVscy9JbnZvaWNlJztcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzL09ic2VydmFibGUnO1xuaW1wb3J0IHsgSW5qZWN0YWJsZSwgT3B0aW9uYWwsIEluamVjdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSU5WT0lDRV9BUEkgfSBmcm9tICcuL2FwaXVybHMvaW52b2ljZSc7XG5pbXBvcnQgeyBIdHRwV3JhcHBlclNlcnZpY2UgfSBmcm9tICcuL2h0dHBXcmFwcGVyLnNlcnZpY2UnO1xuaW1wb3J0IHsgUm91dGVyIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcbmltcG9ydCB7IEJhc2VSZXNwb25zZSB9IGZyb20gJy4uL21vZGVscy9hcGktbW9kZWxzL0Jhc2VSZXNwb25zZSc7XG5pbXBvcnQgeyBVc2VyRGV0YWlscyB9IGZyb20gJy4uL21vZGVscy9hcGktbW9kZWxzL2xvZ2luTW9kZWxzJztcbmltcG9ydCB7IEVycm9ySGFuZGxlciB9IGZyb20gJy4vY2F0Y2hNYW5hZ2VyL2NhdGNobWFuZ2VyJztcbmltcG9ydCB7IEdlbmVyYWxTZXJ2aWNlIH0gZnJvbSAnLi9nZW5lcmFsLnNlcnZpY2UnO1xuaW1wb3J0IHsgU2VydmljZUNvbmZpZywgSVNlcnZpY2VDb25maWdBcmdzIH0gZnJvbSAnLi9zZXJ2aWNlLmNvbmZpZyc7XG5cbi8vIGltcG9ydCB7IElzRGl2VmlzaWJsZSB9IGZyb20gJy4uL2ludm9pY2UvdGVtcGxhdGVzL2VkaXQtdGVtcGxhdGUvZmlsdGVycy1jb250YWluZXIvY29udGVudC1maWx0ZXJzL2NvbnRlbnQuZmlsdGVycy5jb21wb25lbnQnO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgSW52b2ljZVRlbXBsYXRlc1NlcnZpY2Uge1xuICBwcml2YXRlIGNvbXBhbnlVbmlxdWVOYW1lOiBzdHJpbmc7XG4gIHByaXZhdGUgdXNlcjogVXNlckRldGFpbHM7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBlcnJvckhhbmRsZXI6IEVycm9ySGFuZGxlciwgcHVibGljIF9odHRwOiBIdHRwV3JhcHBlclNlcnZpY2UsIHB1YmxpYyBfcm91dGVyOiBSb3V0ZXIsXG4gICAgICAgICAgICAgIHByaXZhdGUgX2dlbmVyYWxTZXJ2aWNlOiBHZW5lcmFsU2VydmljZSwgQE9wdGlvbmFsKCkgQEluamVjdChTZXJ2aWNlQ29uZmlnKSBwcml2YXRlIGNvbmZpZzogSVNlcnZpY2VDb25maWdBcmdzKSB7XG4gIH1cblxuICBwdWJsaWMgZ2V0VGVtcGxhdGVzKCk6IE9ic2VydmFibGU8QmFzZVJlc3BvbnNlPEN1c3RvbVRlbXBsYXRlUmVzcG9uc2VbXSwgc3RyaW5nPj4ge1xuICAgIHRoaXMudXNlciA9IHRoaXMuX2dlbmVyYWxTZXJ2aWNlLnVzZXI7XG4gICAgdGhpcy5jb21wYW55VW5pcXVlTmFtZSA9IHRoaXMuX2dlbmVyYWxTZXJ2aWNlLmNvbXBhbnlVbmlxdWVOYW1lO1xuICAgIHJldHVybiB0aGlzLl9odHRwLmdldCh0aGlzLmNvbmZpZy5hcGlVcmwgKyBJTlZPSUNFX0FQSS5HRVRfVVNFUl9URU1QTEFURVMpLm1hcCgocmVzKSA9PiB7XG4gICAgICBsZXQgZGF0YTogQmFzZVJlc3BvbnNlPEN1c3RvbVRlbXBsYXRlUmVzcG9uc2VbXSwgc3RyaW5nPiA9IHJlcy5qc29uKCk7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9KS5jYXRjaCgoZSkgPT4gdGhpcy5lcnJvckhhbmRsZXIuSGFuZGxlQ2F0Y2g8Q3VzdG9tVGVtcGxhdGVSZXNwb25zZVtdLCBzdHJpbmc+KGUsICcnKSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0QWxsQ3JlYXRlZFRlbXBsYXRlcygpOiBPYnNlcnZhYmxlPEJhc2VSZXNwb25zZTxDdXN0b21UZW1wbGF0ZVJlc3BvbnNlW10sIHN0cmluZz4+IHtcbiAgICB0aGlzLnVzZXIgPSB0aGlzLl9nZW5lcmFsU2VydmljZS51c2VyO1xuICAgIHRoaXMuY29tcGFueVVuaXF1ZU5hbWUgPSB0aGlzLl9nZW5lcmFsU2VydmljZS5jb21wYW55VW5pcXVlTmFtZTtcbiAgICByZXR1cm4gdGhpcy5faHR0cC5nZXQodGhpcy5jb25maWcuYXBpVXJsICsgSU5WT0lDRV9BUEkuR0VUX0NSRUFURURfVEVNUExBVEVTLnJlcGxhY2UoJzpjb21wYW55VW5pcXVlTmFtZScsIGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLmNvbXBhbnlVbmlxdWVOYW1lKSkpLm1hcCgocmVzKSA9PiB7XG4gICAgICBsZXQgZGF0YTogQmFzZVJlc3BvbnNlPEN1c3RvbVRlbXBsYXRlUmVzcG9uc2VbXSwgc3RyaW5nPiA9IHJlcy5qc29uKCk7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9KS5jYXRjaCgoZSkgPT4gdGhpcy5lcnJvckhhbmRsZXIuSGFuZGxlQ2F0Y2g8Q3VzdG9tVGVtcGxhdGVSZXNwb25zZVtdLCBzdHJpbmc+KGUsICcnKSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0Q3VzdG9tVGVtcGxhdGUodGVtcGxhdGVVbmlxdWVOYW1lOiBzdHJpbmcpOiBPYnNlcnZhYmxlPEJhc2VSZXNwb25zZTxHZXRJbnZvaWNlVGVtcGxhdGVEZXRhaWxzUmVzcG9uc2UsIHN0cmluZz4+IHtcbiAgICB0aGlzLnVzZXIgPSB0aGlzLl9nZW5lcmFsU2VydmljZS51c2VyO1xuICAgIHRoaXMuY29tcGFueVVuaXF1ZU5hbWUgPSB0aGlzLl9nZW5lcmFsU2VydmljZS5jb21wYW55VW5pcXVlTmFtZTtcbiAgICByZXR1cm4gdGhpcy5faHR0cC5nZXQodGhpcy5jb25maWcuYXBpVXJsICsgSU5WT0lDRV9BUEkuR0VUX0NVU1RPTV9URU1QTEFURS5yZXBsYWNlKCc6Y29tcGFueVVuaXF1ZU5hbWUnLCBlbmNvZGVVUklDb21wb25lbnQodGhpcy5jb21wYW55VW5pcXVlTmFtZSkpLnJlcGxhY2UoJzp0ZW1wbGF0ZVVuaXF1ZU5hbWUnLCB0ZW1wbGF0ZVVuaXF1ZU5hbWUpKS5tYXAoKHJlcykgPT4ge1xuICAgICAgbGV0IGRhdGE6IEJhc2VSZXNwb25zZTxHZXRJbnZvaWNlVGVtcGxhdGVEZXRhaWxzUmVzcG9uc2UsIHN0cmluZz4gPSByZXMuanNvbigpO1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSkuY2F0Y2goKGUpID0+IHtcbiAgICAgIGxldCBvYmplY3QgPSB0aGlzLmVycm9ySGFuZGxlci5IYW5kbGVDYXRjaDxhbnksIHN0cmluZz4oZSk7XG4gICAgICByZXR1cm4gb2JqZWN0Lm1hcChwID0+IHAuYm9keSk7XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgc2V0VGVtcGxhdGVBc0RlZmF1bHQodGVtcGxhdGVVbmlxdWVOYW1lOiBzdHJpbmcpOiBPYnNlcnZhYmxlPEJhc2VSZXNwb25zZTxhbnksIHN0cmluZz4+IHtcbiAgICB0aGlzLnVzZXIgPSB0aGlzLl9nZW5lcmFsU2VydmljZS51c2VyO1xuICAgIHRoaXMuY29tcGFueVVuaXF1ZU5hbWUgPSB0aGlzLl9nZW5lcmFsU2VydmljZS5jb21wYW55VW5pcXVlTmFtZTtcbiAgICByZXR1cm4gdGhpcy5faHR0cC5wYXRjaCh0aGlzLmNvbmZpZy5hcGlVcmwgKyBJTlZPSUNFX0FQSS5TRVRfQVNfREVGQVVMVC5yZXBsYWNlKCc6Y29tcGFueVVuaXF1ZU5hbWUnLCBlbmNvZGVVUklDb21wb25lbnQodGhpcy5jb21wYW55VW5pcXVlTmFtZSkpLnJlcGxhY2UoJzp0ZW1wbGF0ZVVuaXF1ZU5hbWUnLCB0ZW1wbGF0ZVVuaXF1ZU5hbWUpLCB7fSkubWFwKChyZXMpID0+IHtcbiAgICAgIGxldCBkYXRhOiBCYXNlUmVzcG9uc2U8YW55LCBzdHJpbmc+ID0gcmVzLmpzb24oKTtcbiAgICAgIGRhdGEucXVlcnlTdHJpbmcgPSB7dGVtcGxhdGVVbmlxdWVOYW1lfTtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0pLmNhdGNoKChlKSA9PiB7XG4gICAgICBsZXQgb2JqZWN0ID0gdGhpcy5lcnJvckhhbmRsZXIuSGFuZGxlQ2F0Y2g8YW55LCBzdHJpbmc+KGUpO1xuICAgICAgcmV0dXJuIG9iamVjdC5tYXAocCA9PiBwLmJvZHkpO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGRlbGV0ZVRlbXBsYXRlKHRlbXBsYXRlVW5pcXVlTmFtZTogc3RyaW5nKTogT2JzZXJ2YWJsZTxCYXNlUmVzcG9uc2U8YW55LCBzdHJpbmc+PiB7XG4gICAgdGhpcy51c2VyID0gdGhpcy5fZ2VuZXJhbFNlcnZpY2UudXNlcjtcbiAgICB0aGlzLmNvbXBhbnlVbmlxdWVOYW1lID0gdGhpcy5fZ2VuZXJhbFNlcnZpY2UuY29tcGFueVVuaXF1ZU5hbWU7XG4gICAgcmV0dXJuIHRoaXMuX2h0dHAuZGVsZXRlKHRoaXMuY29uZmlnLmFwaVVybCArIElOVk9JQ0VfQVBJLkRFTEVURV9URU1QTEFURS5yZXBsYWNlKCc6Y29tcGFueVVuaXF1ZU5hbWUnLCBlbmNvZGVVUklDb21wb25lbnQodGhpcy5jb21wYW55VW5pcXVlTmFtZSkpLnJlcGxhY2UoJzp0ZW1wbGF0ZVVuaXF1ZU5hbWUnLCB0ZW1wbGF0ZVVuaXF1ZU5hbWUpKS5tYXAoKHJlcykgPT4ge1xuICAgICAgbGV0IGRhdGE6IEJhc2VSZXNwb25zZTxhbnksIHN0cmluZz4gPSByZXMuanNvbigpO1xuICAgICAgZGF0YS5xdWVyeVN0cmluZyA9IHt0ZW1wbGF0ZVVuaXF1ZU5hbWV9O1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSkuY2F0Y2goKGUpID0+IHtcbiAgICAgIGxldCBvYmplY3QgPSB0aGlzLmVycm9ySGFuZGxlci5IYW5kbGVDYXRjaDxhbnksIHN0cmluZz4oZSk7XG4gICAgICByZXR1cm4gb2JqZWN0Lm1hcChwID0+IHAuYm9keSk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBwdWJsaWMgc2F2ZVRlbXBsYXRlcyhtb2RlbDogYW55KTogT2JzZXJ2YWJsZTxUZW1wbGF0ZT4ge1xuICAvLyAgIGFsZXJ0KCdvaycpO1xuICAvLyAgIHRoaXMuc3RvcmUudGFrZSgxKS5zdWJzY3JpYmUocyA9PiB7XG4gIC8vICAgICBpZiAocy5zZXNzaW9uLnVzZXIpIHtcbiAgLy8gICAgICAgdGhpcy51c2VyID0gcy5zZXNzaW9uLnVzZXIudXNlcjtcbiAgLy8gICAgIH1cbiAgLy8gICAgIHRoaXMuY29tcGFueVVuaXF1ZU5hbWUgPSBzLnNlc3Npb24uY29tcGFueVVuaXF1ZU5hbWU7XG4gIC8vICAgfSk7XG4gIC8vICAgcmV0dXJuIHRoaXMuX2h0dHAucG9zdCh0aGlzLmNvbmZpZy5hcGlVcmwgKyBJTlZPSUNFX0FQSS5DUkVBVEVfTkVXX1RFTVBMQVRFLnJlcGxhY2UoJzpjb21wYW55VW5pcXVlTmFtZScsIGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLmNvbXBhbnlVbmlxdWVOYW1lKSksIG1vZGVsKS5tYXAoKHJlcykgPT4ge1xuICAvLyAgICAgbGV0IGRhdGE6IFRlbXBsYXRlID0gcmVzLmpzb24oKTtcbiAgLy8gICAgIHJldHVybiBkYXRhO1xuICAvLyAgIH0pLmNhdGNoKChlKSA9PiB7XG4gIC8vICAgICBsZXQgb2JqZWN0ID0gdGhpcy5lcnJvckhhbmRsZXIuSGFuZGxlQ2F0Y2g8VGVtcGxhdGUsIHN0cmluZz4oZSk7XG4gIC8vICAgICByZXR1cm4gb2JqZWN0Lm1hcChwID0+IHAuYm9keSk7XG4gIC8vICAgfSk7XG4gIC8vIH1cblxuICBwdWJsaWMgc2F2ZVRlbXBsYXRlcyhtb2RlbDogYW55KTogT2JzZXJ2YWJsZTxCYXNlUmVzcG9uc2U8c3RyaW5nLCBzdHJpbmc+PiB7XG4gICAgdGhpcy51c2VyID0gdGhpcy5fZ2VuZXJhbFNlcnZpY2UudXNlcjtcbiAgICB0aGlzLmNvbXBhbnlVbmlxdWVOYW1lID0gdGhpcy5fZ2VuZXJhbFNlcnZpY2UuY29tcGFueVVuaXF1ZU5hbWU7XG4gICAgcmV0dXJuIHRoaXMuX2h0dHAucG9zdCh0aGlzLmNvbmZpZy5hcGlVcmwgKyBJTlZPSUNFX0FQSS5DUkVBVEVfTkVXX1RFTVBMQVRFLnJlcGxhY2UoJzpjb21wYW55VW5pcXVlTmFtZScsIGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLmNvbXBhbnlVbmlxdWVOYW1lKSksIG1vZGVsKS5tYXAoKHJlcykgPT4ge1xuICAgICAgbGV0IGRhdGE6IEJhc2VSZXNwb25zZTxzdHJpbmcsIHN0cmluZz4gPSByZXMuanNvbigpO1xuICAgICAgZGF0YS5yZXF1ZXN0ID0gbW9kZWw7XG4gICAgICBkYXRhLnF1ZXJ5U3RyaW5nID0ge307XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9KS5jYXRjaCgoZSkgPT4gdGhpcy5lcnJvckhhbmRsZXIuSGFuZGxlQ2F0Y2g8c3RyaW5nLCBzdHJpbmc+KGUsIG1vZGVsKSk7XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlVGVtcGxhdGUodGVtcGxhdGVVbmlxdWVOYW1lOiBzdHJpbmcsIG1vZGVsOiBhbnkpOiBPYnNlcnZhYmxlPEJhc2VSZXNwb25zZTxzdHJpbmcsIHN0cmluZz4+IHtcbiAgICB0aGlzLnVzZXIgPSB0aGlzLl9nZW5lcmFsU2VydmljZS51c2VyO1xuICAgIHRoaXMuY29tcGFueVVuaXF1ZU5hbWUgPSB0aGlzLl9nZW5lcmFsU2VydmljZS5jb21wYW55VW5pcXVlTmFtZTtcbiAgICByZXR1cm4gdGhpcy5faHR0cC5wdXQodGhpcy5jb25maWcuYXBpVXJsICsgSU5WT0lDRV9BUEkuVVBEQVRFX1RFTVBMQVRFLnJlcGxhY2UoJzpjb21wYW55VW5pcXVlTmFtZScsIGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLmNvbXBhbnlVbmlxdWVOYW1lKSkucmVwbGFjZSgnOnRlbXBsYXRlVW5pcXVlTmFtZScsIGVuY29kZVVSSUNvbXBvbmVudCh0ZW1wbGF0ZVVuaXF1ZU5hbWUpKSwgbW9kZWwpLm1hcCgocmVzKSA9PiB7XG4gICAgICBsZXQgZGF0YTogQmFzZVJlc3BvbnNlPHN0cmluZywgc3RyaW5nPiA9IHJlcy5qc29uKCk7XG4gICAgICBkYXRhLnJlcXVlc3QgPSBtb2RlbDtcbiAgICAgIGRhdGEucXVlcnlTdHJpbmcgPSB7fTtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0pLmNhdGNoKChlKSA9PiB0aGlzLmVycm9ySGFuZGxlci5IYW5kbGVDYXRjaDxzdHJpbmcsIHN0cmluZz4oZSwgbW9kZWwpKTtcbiAgfVxuXG4gIC8vIHB1YmxpYyBnZXRUb3BNYXJnaW4oKTogT2JzZXJ2YWJsZTxudW1iZXI+IHtcbiAgLy8gICByZXR1cm4gdGhpcy5zdG9yZS5zZWxlY3QoKHN0YXRlOiBBcHBTdGF0ZSkgPT4gc3RhdGUuaW52dGVtcC50ZW1wbGF0ZU1ldGEudG9wTWFyZ2luKTtcbiAgLy8gfVxuICAvL1xuICAvLyBwdWJsaWMgZ2V0Qm90dG9tTWFyZ2luKCk6IE9ic2VydmFibGU8bnVtYmVyPiB7XG4gIC8vICAgcmV0dXJuIHRoaXMuc3RvcmUuc2VsZWN0KChzdGF0ZTogQXBwU3RhdGUpID0+IHN0YXRlLmludnRlbXAudGVtcGxhdGVNZXRhLmJvdHRvbU1hcmdpbik7XG4gIC8vIH1cbiAgLy9cbiAgLy8gcHVibGljIGdldExlZnRNYXJnaW4oKTogT2JzZXJ2YWJsZTxudW1iZXI+IHtcbiAgLy8gICByZXR1cm4gdGhpcy5zdG9yZS5zZWxlY3QoKHN0YXRlOiBBcHBTdGF0ZSkgPT4gc3RhdGUuaW52dGVtcC50ZW1wbGF0ZU1ldGEubGVmdE1hcmdpbik7XG4gIC8vIH1cbiAgLy9cbiAgLy8gcHVibGljIGdldFJpZ2h0TWFyZ2luKCk6IE9ic2VydmFibGU8bnVtYmVyPiB7XG4gIC8vICAgcmV0dXJuIHRoaXMuc3RvcmUuc2VsZWN0KChzdGF0ZTogQXBwU3RhdGUpID0+IHN0YXRlLmludnRlbXAudGVtcGxhdGVNZXRhLnJpZ2h0TWFyZ2luKTtcbiAgLy8gfVxuICAvL1xuICAvLyBwdWJsaWMgZ2V0Rm9udEZhbWlseSgpOiBPYnNlcnZhYmxlPHN0cmluZz4ge1xuICAvLyAgIHJldHVybiB0aGlzLnN0b3JlLnNlbGVjdCgoc3RhdGU6IEFwcFN0YXRlKSA9PiBzdGF0ZS5pbnZ0ZW1wLnRlbXBsYXRlTWV0YS5mb250KTtcbiAgLy8gfVxuICAvL1xuICAvLyBwdWJsaWMgZ2V0Q29sb3IoKTogT2JzZXJ2YWJsZTxzdHJpbmc+IHtcbiAgLy8gICByZXR1cm4gdGhpcy5zdG9yZS5zZWxlY3QoKHN0YXRlOiBBcHBTdGF0ZSkgPT4gc3RhdGUuaW52dGVtcC50ZW1wbGF0ZU1ldGEuY29sb3IpO1xuICAvLyB9XG4gIC8vXG4gIC8vIHB1YmxpYyBnZXRDb21wYW55TmFtZSgpOiBPYnNlcnZhYmxlPHN0cmluZz4ge1xuICAvLyAgIHJldHVybiB0aGlzLnN0b3JlLnNlbGVjdCgoc3RhdGU6IEFwcFN0YXRlKSA9PiBzdGF0ZS5pbnZ0ZW1wLnRlbXBsYXRlTWV0YS5jb21wYW55TmFtZSk7XG4gIC8vIH1cbiAgLy9cbiAgLy8gcHVibGljIGdldEdTVElOKCk6IE9ic2VydmFibGU8c3RyaW5nPiB7XG4gIC8vICAgcmV0dXJuIHRoaXMuc3RvcmUuc2VsZWN0KChzdGF0ZTogQXBwU3RhdGUpID0+IHN0YXRlLmludnRlbXAudGVtcGxhdGVNZXRhLkdTVElOKTtcbiAgLy8gfVxuICAvL1xuICAvLyBwdWJsaWMgZ2V0UEFOKCk6IE9ic2VydmFibGU8c3RyaW5nPiB7XG4gIC8vICAgcmV0dXJuIHRoaXMuc3RvcmUuc2VsZWN0KChzdGF0ZTogQXBwU3RhdGUpID0+IHN0YXRlLmludnRlbXAudGVtcGxhdGVNZXRhLlBBTik7XG4gIC8vIH1cbiAgLy9cbiAgLy8gcHVibGljIGdldEFkZHJlc3MoKTogT2JzZXJ2YWJsZTxzdHJpbmc+IHtcbiAgLy8gICByZXR1cm4gdGhpcy5zdG9yZS5zZWxlY3QoKHN0YXRlOiBBcHBTdGF0ZSkgPT4gc3RhdGUuaW52dGVtcC50ZW1wbGF0ZU1ldGEuYWRkcmVzcyk7XG4gIC8vIH1cbiAgLy9cbiAgLy8gcHVibGljIGdldEludm9pY2VEYXRlKCk6IE9ic2VydmFibGU8c3RyaW5nPiB7XG4gIC8vICAgcmV0dXJuIHRoaXMuc3RvcmUuc2VsZWN0KChzdGF0ZTogQXBwU3RhdGUpID0+IHN0YXRlLmludnRlbXAudGVtcGxhdGVNZXRhLmludm9pY2VEYXRlKTtcbiAgLy8gfVxuICAvL1xuICAvLyBwdWJsaWMgZ2V0SW52b2ljZU5vKCk6IE9ic2VydmFibGU8c3RyaW5nPiB7XG4gIC8vICAgcmV0dXJuIHRoaXMuc3RvcmUuc2VsZWN0KChzdGF0ZTogQXBwU3RhdGUpID0+IHN0YXRlLmludnRlbXAudGVtcGxhdGVNZXRhLmludm9pY2VOdW1iZXIpO1xuICAvLyB9XG4gIC8vXG4gIC8vIHB1YmxpYyBnZXRTaGlwcGluZ0RhdGUoKTogT2JzZXJ2YWJsZTxzdHJpbmc+IHtcbiAgLy8gICByZXR1cm4gdGhpcy5zdG9yZS5zZWxlY3QoKHN0YXRlOiBBcHBTdGF0ZSkgPT4gc3RhdGUuaW52dGVtcC50ZW1wbGF0ZU1ldGEuc2hpcHBpbmdEYXRlKTtcbiAgLy8gfVxuICAvLyBwdWJsaWMgZ2V0U2hpcHBpbmdWaWEoKTogT2JzZXJ2YWJsZTxzdHJpbmc+IHtcbiAgLy8gICByZXR1cm4gdGhpcy5zdG9yZS5zZWxlY3QoKHN0YXRlOiBBcHBTdGF0ZSkgPT4gc3RhdGUuaW52dGVtcC50ZW1wbGF0ZU1ldGEuc2hpcHBpbmdWaWEpO1xuICAvLyB9XG4gIC8vXG4gIC8vIHB1YmxpYyBnZXRTaGlwcGluZ05vKCk6IE9ic2VydmFibGU8c3RyaW5nPiB7XG4gIC8vICAgcmV0dXJuIHRoaXMuc3RvcmUuc2VsZWN0KChzdGF0ZTogQXBwU3RhdGUpID0+IHN0YXRlLmludnRlbXAudGVtcGxhdGVNZXRhLnNoaXBwaW5nTm8pO1xuICAvLyB9XG4gIC8vXG4gIC8vIHB1YmxpYyBnZXRUcmFja2luZ0RhdGUoKTogT2JzZXJ2YWJsZTxzdHJpbmc+IHtcbiAgLy8gICByZXR1cm4gdGhpcy5zdG9yZS5zZWxlY3QoKHN0YXRlOiBBcHBTdGF0ZSkgPT4gc3RhdGUuaW52dGVtcC50ZW1wbGF0ZU1ldGEudHJhY2tpbmdEYXRlKTtcbiAgLy8gfVxuICAvL1xuICAvLyBwdWJsaWMgZ2V0VHJhY2tpbmdOdW1iZXIoKTogT2JzZXJ2YWJsZTxzdHJpbmc+IHtcbiAgLy8gICByZXR1cm4gdGhpcy5zdG9yZS5zZWxlY3QoKHN0YXRlOiBBcHBTdGF0ZSkgPT4gc3RhdGUuaW52dGVtcC50ZW1wbGF0ZU1ldGEudHJhY2tpbmdOdW1iZXIpO1xuICAvLyB9XG4gIC8vXG4gIC8vIHB1YmxpYyBnZXRDdXN0b21lck5hbWUoKTogT2JzZXJ2YWJsZTxzdHJpbmc+IHtcbiAgLy8gICByZXR1cm4gdGhpcy5zdG9yZS5zZWxlY3QoKHN0YXRlOiBBcHBTdGF0ZSkgPT4gc3RhdGUuaW52dGVtcC50ZW1wbGF0ZU1ldGEuY3VzdG9tZXJOYW1lKTtcbiAgLy8gfVxuICAvL1xuICAvLyBwdWJsaWMgZ2V0Q3VzdG9tZXJFbWFpbCgpOiBPYnNlcnZhYmxlPHN0cmluZz4ge1xuICAvLyAgIHJldHVybiB0aGlzLnN0b3JlLnNlbGVjdCgoc3RhdGU6IEFwcFN0YXRlKSA9PiBzdGF0ZS5pbnZ0ZW1wLnRlbXBsYXRlTWV0YS5jdXN0b21lckVtYWlsKTtcbiAgLy8gfVxuICAvL1xuICAvLyBwdWJsaWMgZ2V0Q3VzdG9tZXJNb2JpbGVObygpOiBPYnNlcnZhYmxlPHN0cmluZz4ge1xuICAvLyAgIHJldHVybiB0aGlzLnN0b3JlLnNlbGVjdCgoc3RhdGU6IEFwcFN0YXRlKSA9PiBzdGF0ZS5pbnZ0ZW1wLnRlbXBsYXRlTWV0YS5jdXN0b21lck1vYmlsZU51bWJlcik7XG4gIC8vIH1cbiAgLy9cbiAgLy8gcHVibGljIGdldER1ZURhdGUoKTogT2JzZXJ2YWJsZTxzdHJpbmc+IHtcbiAgLy8gICByZXR1cm4gdGhpcy5zdG9yZS5zZWxlY3QoKHN0YXRlOiBBcHBTdGF0ZSkgPT4gc3RhdGUuaW52dGVtcC50ZW1wbGF0ZU1ldGEuZHVlRGF0ZSk7XG4gIC8vIH1cbiAgLy9cbiAgLy8gcHVibGljIGdldEJpbGxpbmdBZGRyZXNzKCk6IE9ic2VydmFibGU8c3RyaW5nPiB7XG4gIC8vICAgcmV0dXJuIHRoaXMuc3RvcmUuc2VsZWN0KChzdGF0ZTogQXBwU3RhdGUpID0+IHN0YXRlLmludnRlbXAudGVtcGxhdGVNZXRhLmJpbGxpbmdBZGRyZXNzKTtcbiAgLy8gfVxuICAvL1xuICAvLyBwdWJsaWMgZ2V0QmlsbGluZ1N0YXRlKCk6IE9ic2VydmFibGU8c3RyaW5nPiB7XG4gIC8vICAgcmV0dXJuIHRoaXMuc3RvcmUuc2VsZWN0KChzdGF0ZTogQXBwU3RhdGUpID0+IHN0YXRlLmludnRlbXAudGVtcGxhdGVNZXRhLmJpbGxpbmdTdGF0ZSk7XG4gIC8vIH1cbiAgLy9cbiAgLy8gcHVibGljIGdldEJpbGxpbmdHU1RJTigpOiBPYnNlcnZhYmxlPHN0cmluZz4ge1xuICAvLyAgIHJldHVybiB0aGlzLnN0b3JlLnNlbGVjdCgoc3RhdGU6IEFwcFN0YXRlKSA9PiBzdGF0ZS5pbnZ0ZW1wLnRlbXBsYXRlTWV0YS5iaWxsaW5nR3N0aW4pO1xuICAvLyB9XG4gIC8vXG4gIC8vIHB1YmxpYyBnZXRTaGlwcGluZ0FkZHJlc3MoKTogT2JzZXJ2YWJsZTxzdHJpbmc+IHtcbiAgLy8gICByZXR1cm4gdGhpcy5zdG9yZS5zZWxlY3QoKHN0YXRlOiBBcHBTdGF0ZSkgPT4gc3RhdGUuaW52dGVtcC50ZW1wbGF0ZU1ldGEuc2hpcHBpbmdBZGRyZXNzKTtcbiAgLy8gfVxuICAvL1xuICAvLyBwdWJsaWMgZ2V0U2hpcHBpbmdTdGF0ZSgpOiBPYnNlcnZhYmxlPHN0cmluZz4ge1xuICAvLyAgIHJldHVybiB0aGlzLnN0b3JlLnNlbGVjdCgoc3RhdGU6IEFwcFN0YXRlKSA9PiBzdGF0ZS5pbnZ0ZW1wLnRlbXBsYXRlTWV0YS5zaGlwcGluZ0RhdGUpO1xuICAvLyB9XG4gIC8vXG4gIC8vIHB1YmxpYyBnZXRTaGlwcGluZ0dTVElOKCk6IE9ic2VydmFibGU8c3RyaW5nPiB7XG4gIC8vICAgcmV0dXJuIHRoaXMuc3RvcmUuc2VsZWN0KChzdGF0ZTogQXBwU3RhdGUpID0+IHN0YXRlLmludnRlbXAudGVtcGxhdGVNZXRhLnNoaXBwaW5Hc3Rpbik7XG4gIC8vIH1cbiAgLy9cbiAgLy8gcHVibGljIGdldEN1c3RvbUZpZWxkMSgpOiBPYnNlcnZhYmxlPHN0cmluZz4ge1xuICAvLyAgIHJldHVybiB0aGlzLnN0b3JlLnNlbGVjdCgoc3RhdGU6IEFwcFN0YXRlKSA9PiBzdGF0ZS5pbnZ0ZW1wLnRlbXBsYXRlTWV0YS5jdXN0b21GaWVsZDEpO1xuICAvLyB9XG4gIC8vXG4gIC8vIHB1YmxpYyBnZXRDdXN0b21GaWVsZDIoKTogT2JzZXJ2YWJsZTxzdHJpbmc+IHtcbiAgLy8gICByZXR1cm4gdGhpcy5zdG9yZS5zZWxlY3QoKHN0YXRlOiBBcHBTdGF0ZSkgPT4gc3RhdGUuaW52dGVtcC50ZW1wbGF0ZU1ldGEuY3VzdG9tRmllbGQyKTtcbiAgLy8gfVxuICAvL1xuICAvLyBwdWJsaWMgZ2V0Q3VzdG9tRmllbGQzKCk6IE9ic2VydmFibGU8c3RyaW5nPiB7XG4gIC8vICAgcmV0dXJuIHRoaXMuc3RvcmUuc2VsZWN0KChzdGF0ZTogQXBwU3RhdGUpID0+IHN0YXRlLmludnRlbXAudGVtcGxhdGVNZXRhLmN1c3RvbUZpZWxkMyk7XG4gIC8vIH1cbiAgLy9cbiAgLy8gcHVibGljIGdldEZvcm1OYW1lSW52b2ljZSgpOiBPYnNlcnZhYmxlPHN0cmluZz4ge1xuICAvLyAgIHJldHVybiB0aGlzLnN0b3JlLnNlbGVjdCgoc3RhdGU6IEFwcFN0YXRlKSA9PiBzdGF0ZS5pbnZ0ZW1wLnRlbXBsYXRlTWV0YS5mb3JtTmFtZUludm9pY2UpO1xuICAvLyB9XG4gIC8vXG4gIC8vIHB1YmxpYyBnZXRGb3JtTmFtZVRheEludm9pY2UoKTogT2JzZXJ2YWJsZTxzdHJpbmc+IHtcbiAgLy8gICByZXR1cm4gdGhpcy5zdG9yZS5zZWxlY3QoKHN0YXRlOiBBcHBTdGF0ZSkgPT4gc3RhdGUuaW52dGVtcC50ZW1wbGF0ZU1ldGEuZm9ybU5hbWVUYXhJbnZvaWNlKTtcbiAgLy8gfVxuICAvL1xuICAvLyBwdWJsaWMgZ2V0Rm9ybU5hbWVUYXhJbnZvaWNlRmxhZygpOiBPYnNlcnZhYmxlPGJvb2xlYW4+IHtcbiAgLy8gICByZXR1cm4gdGhpcy5zdG9yZS5zZWxlY3QoKHN0YXRlOiBBcHBTdGF0ZSkgPT4gc3RhdGUuaW52dGVtcC50ZW1wbGF0ZU1ldGEuc2V0SW52b2ljZUZsYWcpO1xuICAvLyB9XG4gIC8vXG4gIC8vIHB1YmxpYyBnZXRTbm9MYWJlbCgpOiBPYnNlcnZhYmxlPHN0cmluZz4ge1xuICAvLyAgIHJldHVybiB0aGlzLnN0b3JlLnNlbGVjdCgoc3RhdGU6IEFwcFN0YXRlKSA9PiBzdGF0ZS5pbnZ0ZW1wLnRlbXBsYXRlTWV0YS5zTm9MYWJlbCk7XG4gIC8vIH1cbiAgLy9cbiAgLy8gcHVibGljIGdldERhdGVMYWJlbCgpOiBPYnNlcnZhYmxlPHN0cmluZz4ge1xuICAvLyAgIHJldHVybiB0aGlzLnN0b3JlLnNlbGVjdCgoc3RhdGU6IEFwcFN0YXRlKSA9PiBzdGF0ZS5pbnZ0ZW1wLnRlbXBsYXRlTWV0YS5kYXRlTGFiZWwpO1xuICAvLyB9XG4gIC8vXG4gIC8vIHB1YmxpYyBnZXRJdGVtTGFiZWwoKTogT2JzZXJ2YWJsZTxzdHJpbmc+IHtcbiAgLy8gICByZXR1cm4gdGhpcy5zdG9yZS5zZWxlY3QoKHN0YXRlOiBBcHBTdGF0ZSkgPT4gc3RhdGUuaW52dGVtcC50ZW1wbGF0ZU1ldGEuaXRlbUxhYmVsKTtcbiAgLy8gfVxuICAvL1xuICAvLyBwdWJsaWMgZ2V0SHNuU2FjTGFiZWwoKTogT2JzZXJ2YWJsZTxzdHJpbmc+IHtcbiAgLy8gICByZXR1cm4gdGhpcy5zdG9yZS5zZWxlY3QoKHN0YXRlOiBBcHBTdGF0ZSkgPT4gc3RhdGUuaW52dGVtcC50ZW1wbGF0ZU1ldGEuaHNuU2FjTGFiZWwpO1xuICAvLyB9XG4gIC8vXG4gIC8vIHB1YmxpYyBnZXRJdGVtQ29kZUxhYmVsKCk6IE9ic2VydmFibGU8c3RyaW5nPiB7XG4gIC8vICAgcmV0dXJuIHRoaXMuc3RvcmUuc2VsZWN0KChzdGF0ZTogQXBwU3RhdGUpID0+IHN0YXRlLmludnRlbXAudGVtcGxhdGVNZXRhLml0ZW1Db2RlTGFiZWwpO1xuICAvLyB9XG4gIC8vXG4gIC8vIHB1YmxpYyBnZXREZXNjTGFiZWwoKTogT2JzZXJ2YWJsZTxzdHJpbmc+IHtcbiAgLy8gICByZXR1cm4gdGhpcy5zdG9yZS5zZWxlY3QoKHN0YXRlOiBBcHBTdGF0ZSkgPT4gc3RhdGUuaW52dGVtcC50ZW1wbGF0ZU1ldGEuZGVzY0xhYmVsKTtcbiAgLy8gfVxuICAvL1xuICAvLyBwdWJsaWMgZ2V0UmF0ZUxhYmVsKCk6IE9ic2VydmFibGU8c3RyaW5nPiB7XG4gIC8vICAgcmV0dXJuIHRoaXMuc3RvcmUuc2VsZWN0KChzdGF0ZTogQXBwU3RhdGUpID0+IHN0YXRlLmludnRlbXAudGVtcGxhdGVNZXRhLnJhdGVMYWJlbCk7XG4gIC8vIH1cbiAgLy9cbiAgLy8gcHVibGljIGdldERpc2NvdW50TGFiZWwoKTogT2JzZXJ2YWJsZTxzdHJpbmc+IHtcbiAgLy8gICByZXR1cm4gdGhpcy5zdG9yZS5zZWxlY3QoKHN0YXRlOiBBcHBTdGF0ZSkgPT4gc3RhdGUuaW52dGVtcC50ZW1wbGF0ZU1ldGEuZGlzY291bnRMYWJlbCk7XG4gIC8vIH1cbiAgLy9cbiAgLy8gcHVibGljIGdldFRvdGFsTGFiZWwoKTogT2JzZXJ2YWJsZTxzdHJpbmc+IHtcbiAgLy8gICByZXR1cm4gdGhpcy5zdG9yZS5zZWxlY3QoKHN0YXRlOiBBcHBTdGF0ZSkgPT4gc3RhdGUuaW52dGVtcC50ZW1wbGF0ZU1ldGEudG90YWxMYWJlbCk7XG4gIC8vIH1cbiAgLy9cbiAgLy8gcHVibGljIGdldFRheGFibGVWYWx1ZUxhYmVsKCk6IE9ic2VydmFibGU8c3RyaW5nPiB7XG4gIC8vICAgcmV0dXJuIHRoaXMuc3RvcmUuc2VsZWN0KChzdGF0ZTogQXBwU3RhdGUpID0+IHN0YXRlLmludnRlbXAudGVtcGxhdGVNZXRhLnRheGFibGVWYWx1ZUxhYmVsKTtcbiAgLy8gfVxuICAvL1xuICAvLyBwdWJsaWMgZ2V0VGF4TGFiZWwoKTogT2JzZXJ2YWJsZTxzdHJpbmc+IHtcbiAgLy8gICByZXR1cm4gdGhpcy5zdG9yZS5zZWxlY3QoKHN0YXRlOiBBcHBTdGF0ZSkgPT4gc3RhdGUuaW52dGVtcC50ZW1wbGF0ZU1ldGEudGF4TGFiZWwpO1xuICAvLyB9XG4gIC8vXG4gIC8vIHB1YmxpYyBnZXRRdWFudGl0eUxhYmVsKCk6IE9ic2VydmFibGU8c3RyaW5nPiB7XG4gIC8vICAgcmV0dXJuIHRoaXMuc3RvcmUuc2VsZWN0KChzdGF0ZTogQXBwU3RhdGUpID0+IHN0YXRlLmludnRlbXAudGVtcGxhdGVNZXRhLnF1YW50aXR5TGFiZWwpO1xuICAvLyB9XG4gIC8vIHB1YmxpYyBnZXRNZXNzYWdlMSgpOiBPYnNlcnZhYmxlPHN0cmluZz4ge1xuICAvLyAgIHJldHVybiB0aGlzLnN0b3JlLnNlbGVjdCgoc3RhdGU6IEFwcFN0YXRlKSA9PiBzdGF0ZS5pbnZ0ZW1wLnRlbXBsYXRlTWV0YS5tZXNzYWdlMSk7XG4gIC8vIH1cbiAgLy8gcHVibGljIGdldE1lc3NhZ2UyKCk6IE9ic2VydmFibGU8c3RyaW5nPiB7XG4gIC8vICAgcmV0dXJuIHRoaXMuc3RvcmUuc2VsZWN0KChzdGF0ZTogQXBwU3RhdGUpID0+IHN0YXRlLmludnRlbXAudGVtcGxhdGVNZXRhLm1lc3NhZ2UyKTtcbiAgLy8gfVxuICAvLyBwdWJsaWMgZ2V0VGF4YWJsZUFtb3VudCgpOiBPYnNlcnZhYmxlPHN0cmluZz4ge1xuICAvLyAgIHJldHVybiB0aGlzLnN0b3JlLnNlbGVjdCgoc3RhdGU6IEFwcFN0YXRlKSA9PiBzdGF0ZS5pbnZ0ZW1wLnRlbXBsYXRlTWV0YS50YXhhYmxlQW1vdW50KTtcbiAgLy8gfVxuICAvLyBwdWJsaWMgZ2V0VG90YWxUYXgoKTogT2JzZXJ2YWJsZTxzdHJpbmc+IHtcbiAgLy8gICByZXR1cm4gdGhpcy5zdG9yZS5zZWxlY3QoKHN0YXRlOiBBcHBTdGF0ZSkgPT4gc3RhdGUuaW52dGVtcC50ZW1wbGF0ZU1ldGEudG90YWxUYXgpO1xuICAvLyB9XG4gIC8vIHB1YmxpYyBnZXRPdGhlckRlZHVjdGlvbigpOiBPYnNlcnZhYmxlPHN0cmluZz4ge1xuICAvLyAgIHJldHVybiB0aGlzLnN0b3JlLnNlbGVjdCgoc3RhdGU6IEFwcFN0YXRlKSA9PiBzdGF0ZS5pbnZ0ZW1wLnRlbXBsYXRlTWV0YS5vdGhlckRlZHVjdGlvbik7XG4gIC8vIH1cbiAgLy8gcHVibGljIGdldFRvdGFsKCk6IE9ic2VydmFibGU8c3RyaW5nPiB7XG4gIC8vICAgcmV0dXJuIHRoaXMuc3RvcmUuc2VsZWN0KChzdGF0ZTogQXBwU3RhdGUpID0+IHN0YXRlLmludnRlbXAudGVtcGxhdGVNZXRhLnRvdGFsKTtcbiAgLy8gfVxuICAvLyBwdWJsaWMgZ2V0VG90YWxJbldvcmRzKCk6IE9ic2VydmFibGU8c3RyaW5nPiB7XG4gIC8vICAgcmV0dXJuIHRoaXMuc3RvcmUuc2VsZWN0KChzdGF0ZTogQXBwU3RhdGUpID0+IHN0YXRlLmludnRlbXAudGVtcGxhdGVNZXRhLnRvdGFsSW5Xb3Jkcyk7XG4gIC8vIH1cbiAgLy8gcHVibGljIGdldFRoYW5rcygpOiBPYnNlcnZhYmxlPHN0cmluZz4ge1xuICAvLyAgIHJldHVybiB0aGlzLnN0b3JlLnNlbGVjdCgoc3RhdGU6IEFwcFN0YXRlKSA9PiBzdGF0ZS5pbnZ0ZW1wLnRlbXBsYXRlTWV0YS50aGFua3MpO1xuICAvLyB9XG4gIC8vIHB1YmxpYyBnZXRJbWFnZVNpZ25hdHVyZSgpOiBPYnNlcnZhYmxlPHN0cmluZz4ge1xuICAvLyAgIHJldHVybiB0aGlzLnN0b3JlLnNlbGVjdCgoc3RhdGU6IEFwcFN0YXRlKSA9PiBzdGF0ZS5pbnZ0ZW1wLnRlbXBsYXRlTWV0YS5pbWFnZVNpZ25hdHVyZSk7XG4gIC8vIH1cbiAgLy8gcHVibGljIGdldFNsb2dhbigpOiBPYnNlcnZhYmxlPHN0cmluZz4ge1xuICAvLyAgIHJldHVybiB0aGlzLnN0b3JlLnNlbGVjdCgoc3RhdGU6IEFwcFN0YXRlKSA9PiBzdGF0ZS5pbnZ0ZW1wLnRlbXBsYXRlTWV0YS5zbG9nYW4pO1xuICAvLyB9XG4gIC8vIHB1YmxpYyBnZXREaXZTdGF0dXMoKTogT2JzZXJ2YWJsZTxJc0RpdlZpc2libGU+IHtcbiAgLy8gICByZXR1cm4gdGhpcy5zdG9yZS5zZWxlY3QoKHN0YXRlOiBBcHBTdGF0ZSkgPT4gc3RhdGUuaW52dGVtcC50ZW1wbGF0ZU1ldGEuZGl2KTtcbiAgLy8gfVxufVxuIl19